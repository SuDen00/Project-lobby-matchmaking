# ER diagram

## 1. Назначение

ER-диаграмма задаёт структуру данных для базы PostgreSQL:
- сущности;
- атрибуты;
- связи между таблицами.

Эта модель используется как основа для файла `db/schema.sql`.

## 2. ER-диаграмма

<p align="center">
  <img src="diagrams/Pasted image 20251224115807.png" width="360">
</p>
## 3. Сущности и связи

- **Lobby**  
  - `id` - первичный ключ;  
  - `name` - имя комнаты;  
  - `type` - тип доступа (public/private);  
  - `join_code` - код приглашения для приватных лобби;  
  - `max_players` - максимальное количество участников;  
  - `current_players` - текущее количество участников;  
  - `status` - состояние лобби (`open`, `closed` и т.п.);  
  - `created_at` - дата и время создания.

- **Player**  
  - `id` - первичный ключ;  
  - `display_name` - отображаемое имя игрока;  
  - `platform_id` - идентификатор игрока на платформе (например, SteamID).

- **Member**  
  - `lobby_id` - ссылка на лобби;  
  - `player_id` - ссылка на игрока;  
  - `joined_at` - дата и время присоединения.

Связи:
- один **Lobby** связан со многими **Member** (отношение "один ко многим");  
- один **Player** также связан со многими **Member**;  
- таблица `members` является связующей для реализации связи "многие ко многим" между игроками и лобби.

## 4. Связь с реализацией

- Структура ER-модели соответствует типам данных, описанным в разделе "Данные и интеграция с БД" файла `01-overview.md`.  
- На основе ER-диаграммы формируется SQL-схема: таблицы `lobbies`, `players`, `members` с внешними ключами и ограничениями целостности.
